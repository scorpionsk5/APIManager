define(function(){var e={},t={removeDetailsFromDataObject:function(e){var r=this;return _.each(e,function(n,a){var i;_.isArray(n)&&(n=n[0]),_.isString(n)&&(i=n.split("."),"_CommonDescriptions"==i[0]&&(n=r.getObjectByPath(r.getSelectedDataObject(),n))),_.isObject(n)&&!_.isArray(n)&&(n._extends&&(i=n._extends,n=_.omit(n,"_extends"),n=e[a]=$.extend({},r.getObjectByPath(r.getSelectedDataObject(),i),n)),e[a]=_.omit(n,r.APIManager.appSettings.getAppSettings().DescriptiveFields),!_.isEmpty(e[a])&&n._InnerFields&&(e[a]=_.omit(n._InnerFields,r.APIManager.appSettings.getAppSettings().DescriptiveFields)),e[a]=t.removeDetailsFromDataObject.call(r,e[a]))}),e},buildMenuItems:function(e,r){var n=this,a={},i=[];return r=r||[],_.each(e,function(e,o){r.push(o),_.isString(e)||_.isArray(e)?(a={text:n.APIManager.APIManagerView.textDescriptor.getDescriptionText(o),url:"#"+r.join(".")},r.splice(r.length-1,1)):a={text:n.APIManager.APIManagerView.textDescriptor.getDescriptionText(o),url:"#"+r.join("."),items:t.buildMenuItems.call(n,e,r)},i.push(a)}),r.splice(r.length-1,1),i},customSort:function(e,r){var n={},a=[],i=this,o=i.APIManager.appSettings.getAppSettings();return r?$.each(e,function(e){a.push(e)}):($.each(e,function(e){_.indexOf(_.union(o.UpperSortedContents,o.LowerSortedContents),e)==-1&&a.push(e)}),a.sort(function(e,t){var r=e.toLowerCase(),n=t.toLowerCase();return r==n?0:r>n?1:-1}),a=_.union(o.UpperSortedContents,a,o.LowerSortedContents)),_.each(a,function(r){e[r]&&(_.isObject(e[r])&&!_.isArray(e[r])&&(e[r]=t.customSort.call(i,e[r],_.indexOf(o.SkipSortingFields,r)>-1)),n[r]=e[r])}),n},loadAllModules:function(e){var r=this,n={};try{$.each(e,function(e,a){$.ajax({url:a+".json",context:r,cache:!1,async:!1,dataType:"text",success:function(a){n[e]=t.customSort.call(r,JSON.parse(a))}})})}catch(e){console.error(e),r.APIManager.APIManagerView.displayMessage("Error occured while parsing data or sorting. Please check console for more details!!!")}return function(){return n}},getDataToExport:function(e){var t=this.getSelectedDataObject();return e?this.getObjectByPath(t,e):t}},r=function(r){this.APIManager=r.APIManager,this.selectObject=function(t){e=this.getAllModulesData()[t]},this.getAllModulesData=t.loadAllModules.call(this,r.moduleDataPath)};return r.prototype.generateSubMenuList=function(){var e={};try{this.getSelectedDataObject()&&(e=t.buildMenuItems.call(this,t.removeDetailsFromDataObject.call(this,_.omit(this.getSelectedDataObject(),"_CommonDescriptions"))))}catch(e){console.error(e),this.APIManager.APIManagerView.displayMessage("Error occured while building sub menu items. Please check console for more details!!!")}return e},r.prototype.generateMainMenuList=function(){var e=[],t=this;try{$.each(this.getAllModulesData(),function(r){e.push({text:t.APIManager.APIManagerView.textDescriptor.getDescriptionText(r),url:"?menu="+r})})}catch(e){console.error(e),this.APIManager.APIManagerView.displayMessage("Error occured while building main menu items. Please check console for more details!!!")}return e},r.prototype.getObjectByPath=function(e,t){if(_.isString(t)){var r=t.split(".");try{_.each(r,function(t,r){e=e[t]})}catch(e){console.error(e),this.APIManager.APIManagerView.displayMessage("Module data object is undefined. Please check console for more details!!!")}return e}},r.prototype.getSelectedDataObject=function(){return e},r.prototype.buildFileToExport=function(e){t.getDataToExport.call(this,e)},r});